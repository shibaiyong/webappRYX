<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="pragma" content="no-cache">
    <title>在线办卡</title>
    <link rel="stylesheet" href="res/dist/css/frozen.css">
    <link rel="stylesheet" href="res/css/app.css?v=20180403001">
    <style>
        body {
            background: #f8f8f8;
        }

        .ui-container {
            background: #fff;
        }
    </style>
    <script src="https://hm.baidu.com/hm.js?4facb10db90c9cdf2d02b09c83aad8f4"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?4facb10db90c9cdf2d02b09c83aad8f4";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

</head>

<body ontouchstart="">
    <section class="ui-container">
        <script id="slider-template" type="text/html">
			<ul class="ui-slider-content" style="width:{{advertRows.length}}00%">
				{{each advertRows advert}} 
					<li onclick="goOutLink('{{ advert.advert_href }}')"><span style="background-image:url('{{ advert.mediaRow.media_url }}')"></span></li>
				{{/each}}
			</ul>
		</script>
        <div id="slider" class="ui-slider">
            <ul class="ui-slider-content"
                style="width: 500%; transition-property: transform; transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(-750px, 0px) translateZ(0px);">

                <li onclick="goOutLink('https://www.ruiyinxin.com/app/adms/advert/index.php?mod=advert&amp;act=url&amp;advert_id=257')"
                    class=""><span
                        style="background-image:url('https://www.ruiyinxin.com/app/adms/media/2018/09/159.jpg')"></span>
                </li>

                <li onclick="goOutLink('https://www.ruiyinxin.com/app/adms/advert/index.php?mod=advert&amp;act=url&amp;advert_id=217')"
                    class=""><span
                        style="background-image:url('https://www.ruiyinxin.com/app/adms/media/2018/09/150.jpg')"></span>
                </li>

                <li onclick="goOutLink('https://www.ruiyinxin.com/app/adms/advert/index.php?mod=advert&amp;act=url&amp;advert_id=329')"
                    class="current"><span
                        style="background-image:url('https://www.ruiyinxin.com/app/adms/media/2019/03/251.jpg')"></span>
                </li>

                <li onclick="goOutLink('https://www.ruiyinxin.com/app/adms/advert/index.php?mod=advert&amp;act=url&amp;advert_id=296')"
                    class=""><span
                        style="background-image:url('https://www.ruiyinxin.com/app/adms/media/2018/11/199.jpg')"></span>
                </li>

                <li onclick="goOutLink('https://www.ruiyinxin.com/app/adms/advert/index.php?mod=advert&amp;act=url&amp;advert_id=256')"
                    class=""><span
                        style="background-image:url('https://www.ruiyinxin.com/app/adms/media/2018/09/158.jpg')"></span>
                </li>

            </ul>
            <ul class="ui-slider-indicators">
                <li class="">1</li>
                <li class="">2</li>
                <li class="current">3</li>
                <li class="">4</li>
                <li class="">5</li>
            </ul>
        </div>
        <div class="bank-list">
            <div class="list-title">
                <div>热门银行推荐</div>
                <div style="text-align: right;color: #0d9dbf"><span onclick="pageRoute('progress.html')">申请进度查询</span>
                </div>
            </div>
            <script id="bank-template" type="text/html">
				{{each common bank}} 
				<li data-links="{{ bank.url}}" class="ui-border-t">
					<div class="ui-list-img">
						<span style="background-image:url('res/img/banklogo/{{ bank.icon}}?v=20180428001')"></span>
					</div>
					<div class="ui-list-info">
						<h4 class="ui-nowrap">{{ bank.name}}
								<i class="recommend divide"></i>
								{{include 'recommend-template' bank}}
						</h4>
						<p>{{ bank.time}}</p>
						<p>{{ bank.limit}}</p>
						{{include 'tag-template' bank}}
					</div>
				</li>
			{{/each}}
			</script>
            <script id="recommend-template" type="text/html">
				{{each recommends recommend}}
				<i class="recommend" style="background:{{recommend.color}}">{{recommend.text}}</i>
				{{/each}}
			</script>
            <script id="tag-template" type="text/html">
				{{each tags tag}}
				<i class="tag">{{tag.text}}</i>
				{{/each}}
			</script>
            <ul id="bank-list" class="ui-list ui-list-link ui-border-tb">

                <li data-links="https://creditcardapp.bankcomm.com/applynew/front/apply/track/record.html?trackCode=A0414223779925"
                    class="ui-border-t">
                    <div class="ui-list-img">
                        <span
                            style="background-image:url('https://mposprepo.ruiyinxin.com/app/credit/res/img/banklogo/ICBC.png?v=20180428001')"></span>
                    </div>
                    <div class="ui-list-info">
                        <h4 class="ui-nowrap">交通银行
                            <i class="recommend divide"></i>
                        </h4>
                        <p>高额度秒级服务，积分好礼</p>
                        <p>最红星期五5%返现</p>


                        <i class="tag">免年费</i>

                        <i class="tag">免息期长达56天</i>


                    </div>
                </li>

            </ul>
        </div>
    </section>
    <script src="res/dist/lib/zepto.min.js"></script>
    <script src="res/dist/js/frozen.js"></script>
    <script src="res/js/template-web.js?v=20180403001"></script>
    <script src="data/data.js?v=20190312001"></script>
    <script src="res/js/app.js?v=20180403001"></script>
    <script>
        $.ajax({
            url: "https://www.ruiyinxin.com/app/adms/api/api.php?mod=advert&act_get=list&posi_id=9&osType=web",
            dataType: 'json',
            success: function (data) {
                if (data.posiRow.rcode == 'y040102' && data.advertRows.length > 0) {
                    var sliderHtml = template('slider-template', data);
                    $('#slider').html(sliderHtml);
                    init();
                }
            }
        });
        function init() {
            document.getElementById("slider").addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
            //幻灯
            (function () {
                var slider = new fz.Scroll('.ui-slider', {
                    role: 'slider',
                    indicator: true,
                    autoplay: true,
                    interval: 3000
                });

                slider.on('beforeScrollStart', function (from, to) {
                    // console.log(from, to);
                });

                slider.on('scrollEnd', function (cruPage) {
                    // console.log(cruPage);
                });

            })();
        }
        $(function () {
            var compare = function (obj1, obj2) {
                var val1 = obj1.order;
                var val2 = obj2.order;
                if (val1 < val2) {
                    return -1;
                } else if (val1 > val2) {
                    return 1;
                } else {
                    return 0;
                }
            }
            var tmpList = bankList.common.sort(compare);
            bankList.common = tmpList;
            var bankHtml = template('bank-template', bankList);
            $('#bank-list').html(bankHtml);
        });
    </script>


</body>

</html>